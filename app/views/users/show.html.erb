<!--  This file is app/views/users/show.html.erb -->
<h2>Details about <em><%= @user.username %></em></h2>

<ul id="details">
  <li>
    ğŸ—£&nbsp;<b>Username</b>
    &nbsp;<%= @user.username %>
  </li>
  <li>
    ğŸ“§&nbsp;<b>Email</b>
    &nbsp;<%= @user.email %>
  </li>
  <li>
    âœï¸&nbsp;<b>Host Rating</b>
    &nbsp;
    <% @user.rating.times do %>
      â­ï¸
    <% end %>
  </li>
  <li>
    ğŸ“…&nbsp;<b>Join WeMeet Since</b>
    &nbsp;<%= @user.created_at.strftime("%m-%d-%Y") %>
  </li>
  <li>
    ğŸ’°&nbsp;<b>Coins</b>
    &nbsp;<%= @user.coins %>
  </li>
</ul>
<br>

<div class="row">
  <% if @is_viewer_user %>
    <%= link_to 'Edit', edit_user_path(@user), :class => 'btn btn-outline-primary col-2' %>
  <% end %>
  <%= link_to 'Back to event list', events_path, :class => 'btn btn-outline-primary col-2' %>
</div>
<br>

<br>
<h3 class="details_padding">ğŸ‰<%= @user.username %>'s Events </h3>
<div class="container-fluid">
  <div class="row">

            <div class="col-md-6">
            <h2>HostedğŸ‘‘</h2>
            <% if (@host_events.empty?) %>            
                You haven't hosted any event. <%= link_to "HOST NOWğŸ¤—", new_event_path() %>
            <% else %>
            <table class="table table-striped col-md-12" id="events">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Details</th>
                        <th>Rate</th>
                    </tr>
                </thead>
                <tbody>

                        <% @host_events.each do |event| %>
                        <tr>
                        <td>
                            <%= event.title %>
                        </td>
                        <td>
                            <%= event.status %>
                        </td>
                        <td>
                            <%= link_to "Details", event_path(event), :class => 'btn btn-outline-secondary'%>
                        </td>
                        <td>
                            <!-- <%= link_to "Rate", event_path(event), :class => 'btn btn-primary'%>-->
                        </td>
                        </tr>
                        <% end %>
                </tbody>
            </table>
            <% end %>
        </div>

        <div class="col-md-6">
            <h2>JoinedğŸ™Œ</h2>
                <% if (@join_events.empty?) %>
                    You haven't joined any event. <%= link_to "JOIN NOWğŸ‘‹", events_path %>
                <% else %>
            <table class="table table-striped col-md-12" id="events">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Status</th>
                    <th>Details</th>
                    <th>Rate</th>
                </tr>
            </thead>
            <tbody>
                    <% @join_events.each do |event| %>
                    <tr>
                    <td>
                        <%= event.title %>
                    </td>
                    <td>
                        <% if event.status == 'open' %>
                        &nbsp;<span class="badge bg-success"><%= event.status %></span>
                        <% else  %>
                        &nbsp;<span class="badge bg-secondary"><%= event.status %></span>
                        <% end  %>
                    </td>
                    <td>
                        <%= link_to "Details", event_path(event), :class => 'btn btn-outline-secondary'%>
                    </td>
                    <td>
                       <!-- <%= link_to "Rate", event_path(event), :class => 'btn btn-primary'%>-->
                    </td>
                    </tr>
                    <% end %>
            </tbody>
            </table>
            <% end %>
        </div>
  </div>
</div>
